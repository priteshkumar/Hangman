<!doctype html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title>Hangman</title>
<style>
body{
	background:black;
	color:green;
}
div {
	width:200px;
	margin-bottom:15px;
}
#hgman{
	width:768px;
	margin-left:auto;
	margin-right:auto;
	margin-top:100px;
	margin-bottom:50px;
}
</style>
</head>
<body>
<div id="hgman">
<h3>PRESS ANY KEY TO GET STARTED.</h3>
<span id="wins">Wins: </span>
<div id="cword">
<div>CURRENT WORD</div>
<div id="dottedword">_ _ _ _ _ _ </div>
</div>
<div>NUMBER OF GUESSES REMAINING</div>
<span id="remguess"></span>
<div>LETTERS ALREADY GUESSED</div>
<span id="guessedletters"></span>
</div>
<script>
document.getElementById("dottedword").innerHTML = "_ _ _ _ _ _";
var guessallowed = 15;
var bandarr = ["mokhov","caspian","emancipator","ifthesetrees","tiesto","armin","oakenfold","orjannielsen","charris","mogwai","hammock","daftpunk","pvandyk","godisast",
				"xxintro","daysofstatic","maserati","redsparrowes","russiancicrcle","explosioninsky"];
var gameOb = {
	    arr:bandarr,
	    wins:0,
	    curbanddocstring:"",
	    currentband:"empty",
	    matchband:[],
	    gamestarted:false,
	    wordguessed:false,
	    guessremaining:15,
	    guessedletters:[],
	    matchlen:0,
	    resetGame:function(){
	    	console.log("game reset");
	    	this.matchlen = 0;
	    	this.wordguessed = false;
	    	this.guessremaining = 15;
	    	var arrindex = Math.floor((Math.random() * 20) + 1);
          	this.currentband = this.arr[arrindex-1];
          	this.curbanddocstring ="";
          	console.log(arrindex);
          	console.log(this.currentband);
          	this.matchband  = [];
        	this.guessedletters = [];
       
        	console.log(this.currentband);
	    	for(var i =0;i < this.currentband.length;i++)
          		{
          			this.matchband.push('_');
          			this.matchband.push(' ');
          			this.curbanddocstring = this.curbanddocstring + "_ ";
          		}
          	console.log(this.matchband.length);
          	console.log(this.matchband);
          	document.getElementById("remguess").innerHTML = this.guessremaining;
          	document.getElementById("guessedletters").innerHTML = "";
    		document.getElementById("dottedword").innerHTML = this.curbanddocstring;
	    },
	    gameControl:function(keyhit){
	    	if(this.guessremaining === guessallowed && this.gamestarted == false){
	    		this.gamestarted = true;
	    		this.matchlen = 0;
          		var arrindex = Math.floor((Math.random() * 12) + 1);
          		this.currentband = this.arr[arrindex];
          		for(var i =0;i < this.currentband.length;i++)
          		{
          			this.matchband.push('_');
          			this.matchband.push(' ');
          			this.curbanddocstring = this.curbanddocstring + "_ ";
          		}
          		console.log(this.currentband);
          		console.log(this.matchband.length);
          		console.log(this.matchband);
          		document.getElementById("guessedletters").innerHTML = "";
          		document.getElementById("dottedword").innerHTML = this.curbanddocstring;
          		document.getElementById("remguess").innerHTML = this.guessremaining;
			}
			else {
					if(this.guessedletters.indexOf(keyhit) == -1){
						this.guessedletters.push(keyhit);
						this.guessremaining = this.guessremaining -1;
						this.displayguessedLetter(keyhit);				
					
					var text="";
					if( this.currentband.indexOf(keyhit) != -1){
						console.log("key match found:  " + keyhit);
						console.log(text);
						for(var i=0;i < this.currentband.length ;i++){
							if(this.currentband[i] == keyhit){
								//store the indexes for update 
								console.log(this.currentband[i] + "  :"  + i + keyhit)
							    this.matchband[i*2] = keyhit;
							    this.matchlen = this.matchlen + 1;
							}
						}
						for (var i=0;i < this.matchband.length;i++){
							text = text + this.matchband[i]
						}
						console.log(this.matchband);
						document.getElementById("dottedword").innerHTML = text;
						if (this.currentband.length == this.matchlen){
							this.wins = this.wins +1;
							this.wordguessed = true;
							document.getElementById("wins").innerHTML = "Wins: " + this.wins;
						}
					}
				}
					if(this.guessremaining == 0 || this.wordguessed == true){
						console.log("noguessremaningreset");
						this.resetGame();
					}

				}

	 	},
	    displayguessedLetter:function(keyhit) {
	    	console.log(this.guessedletters);
	    	var gstring=" ";
	    	for(var i=0;i < this.guessedletters.length;i++){
               gstring = gstring + this.guessedletters[i] + " ";
	    	}
	    	console.log(gstring);
	    	document.getElementById("guessedletters").innerHTML = gstring;
			document.getElementById("remguess").innerHTML = this.guessremaining;

	    }
};

console.log(gameOb);

document.onkeyup = function(event) {
    var keyhit = event.key;
   gameOb.gameControl(keyhit);
};

</script>
</body>
</html>

